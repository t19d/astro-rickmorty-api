import{h as f,p as d}from"./hooks.module.b1431384.js";import{o as c,S as g}from"./StatusSpecie.60bb30d2.js";import{k as m}from"./preact.module.4d513d4a.js";const y="https://rickandmortyapi.com/api",k=y+"/character",v=async(n=1)=>{const s=`${k}?page=${n}`;return await(await fetch(s)).json()};let a=[],b=(n,s)=>{let i=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},l:s||0,lc:0,listen(r,l){return t.lc=i.push(r,l||t.l)/2,()=>{let e=i.indexOf(r);~e&&(i.splice(e,2),t.lc--,t.lc||t.off())}},notify(r){let l=!a.length;for(let e=0;e<i.length;e+=2)a.push(i[e],t.value,r,i[e+1]);if(l){for(let e=0;e<a.length;e+=4){let o=!1;for(let h=e+7;h<a.length;h+=4)if(a[h]<a[e+3]){o=!0;break}o?a.push(a[e],a[e+1],a[e+2],a[e+3]):a[e](a[e+1],a[e+2])}a.length=0}},off(){},set(r){t.value!==r&&(t.value=r,t.notify())},subscribe(r,l){let e=t.listen(r,l);return r(t.value),e},value:n};return t};function C(n,s,i){let t=new Set([...s,void 0]);return n.listen((r,l)=>{t.has(l)&&i(r,l)})}function p(n,s={}){let[,i]=f({}),[t]=f(n.get());return d(()=>{t!==n.get()&&i({})},[]),d(()=>{let r,l,e,o=()=>{r||(r=1,l=setTimeout(()=>{r=void 0,i({})}))};return s.keys?e=C(n,s.keys,o):e=n.listen(o),()=>{e(),clearTimeout(l)}},[n,""+s.keys]),n.get()}const u=b(1);function S({character:n}){return c("a",{href:`/characters/${n.id}`,className:"card",style:`background-image: url(${n.image});`,children:c("div",{className:"details",children:[c("span",{className:"name",children:n.name}),c(g,{status:n.status,species:n.species})]})})}function $({info:n}){let s=p(u);const{count:i,pages:t,next:r,prev:l}=n;return c("section",{children:c("nav",{className:"pagination",children:[c("button",{disabled:s<=1,onClick:()=>{s>1&&u.set(--s)},children:"Previous"}),c("span",{children:[s,"/",t]}),c("button",{disabled:s>=t,onClick:()=>{s<t&&u.set(++s)},children:"Next"})]})})}function w(){const[n,s]=f([]),[i,t]=f({}),r=p(u);return d(()=>{(async()=>{try{const{results:e,info:o}=await v(r);s(e),t(o)}catch(e){console.error("Error fetching characters:",e)}})()},[r]),c(m,{children:[n&&n.length>0&&c("section",{class:"grid",children:n.map(l=>c(S,{character:l}))}),c($,{info:i})]})}export{w as default};
